<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<header class="page-header" style="height: 60px">
    <div
        class="page-header-content"
        style="align-items: center; display: flex; height: 60px; position: fixed;"
    >
        <a class="page-logo-link" href="https://www.satori.com" style="cursor: pointer;">
            <img
                alt="Satori"
                class="page-logo-image"
                height="30"
                src="https://www.satori.com/assets/images/logo-light@2x.png"
                width="177"
            />
        </a>
    </div>
</header>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Observer.html">Observer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Observer.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Observer.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Observer.html#on">on</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RTM.html">RTM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#.roleSecretAuthProvider">roleSecretAuthProvider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#getSubscription">getSubscription</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#isConnected">isConnected</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#isStopped">isStopped</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#publish">publish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#read1">read</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#read2">read</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#restart">restart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#resubscribe">resubscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#start">start</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#stop">stop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#subscribe">subscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#unsubscribe">unsubscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#write">write</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Subscription.html">Subscription</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Subscription.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Subscription.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Subscription.html#on">on</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="RTM.SubscriptionMode.html">SubscriptionMode</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>JavaScript SDK for Satori RTM</h1><p>Use the JavaScript SDK for the Satori RTM to create browser-based applications or server-based applications running within Node.js. The applications use the RTM to publish and subscribe.</p>
<h2>JavaScript SDK Installation</h2><h3>Browser Installation</h3><p>To use the JavaScript SDK from a browser-based application, include the SDK from the CDN and create an RTM client instance:</p>
<pre class="prettyprint source lang-HTML"><code>&lt;script src=&quot;https://satori-a.akamaihd.net/satori-rtm-sdk/v1.2.0/sdk.min.js&quot;>&lt;/script></code></pre><p>and then</p>
<pre class="prettyprint source lang-JavaScript"><code>// create an RTM client instance
var rtm = new RTM(&quot;YOUR_ENDPOINT&quot;, &quot;YOUR_APPKEY&quot;);</code></pre><p><strong>Note</strong>: You can find the application key and endpoint on the <strong>Appkey Info</strong> page for your app in the Dev Portal.</p>
<h3>Node.js Installation</h3><ol>
<li>Install the JavaScript SDK with the following command from NPM:</li>
</ol>
<pre class="prettyprint source"><code>npm install 'satori-rtm-sdk'</code></pre><ol>
<li>In your application file <code>&lt;app_name&gt;.js</code>, use the following code to create an RTM client instance:</li>
</ol>
<pre class="prettyprint source lang-JavaScript"><code>var RTM = require(&quot;satori-rtm-sdk&quot;);

// create an RTM client instance
var rtm = new RTM(&quot;YOUR_ENDPOINT&quot;, &quot;YOUR_APPKEY&quot;);</code></pre><p><strong>Note</strong>: You can find the application key and endpoint for your app in the Dev Portal.</p>
<h2>JavaScript Sample Code</h2><pre class="prettyprint source lang-JavaScript"><code>// create a new subscription with &quot;your-channel&quot; name
var channel = rtm.subscribe(&quot;your-channel&quot;, RTM.SubscriptionMode.SIMPLE);

// add channel data handlers

// channel receives any published message
channel.on(&quot;rtm/subscription/data&quot;, function(pdu) {
    pdu.body.messages.forEach(console.log);
});

// client enters 'connected' state
rtm.on(&quot;enter-connected&quot;, function() {
    rtm.publish(&quot;your-channel&quot;, {key: &quot;value&quot;});
});

// client receives any PDU and PDU is passed as a parameter
rtm.on(&quot;data&quot;, function(pdu) {
    if (pdu.action.endsWith(&quot;/error&quot;)) {
        rtm.restart();
    }
});

// start the client
rtm.start();</code></pre><h2>Documentation</h2><p>You can view the latest JavaScript SDK documentation <a href="https://satori-com.github.io/satori-rtm-sdk-js/">here</a>.</p>
<h4>Generating API docs</h4><pre class="prettyprint source lang-bash"><code>$ npm run docs</code></pre><p>The generated API documentation will apear in the <code>./docs</code> folder.</p>
<h2>Assembling from sources</h2><pre class="prettyprint source lang-bash"><code>$ git clone https://github.com/satori-com/satori-rtm-sdk-js.git
$ cd satori-rtm-sdk
$ npm install
$ npm run build</code></pre><p>The assembled JS output will appear in the <code>./dist/</code> directory.</p>
<h2>Binary data support</h2><p>RTM supports the CBOR subprotocol to work with binary data. Binary data
is represented as <code>Uint8Array</code>.</p>
<details>
<summary>An example to work with binary data:</summary>

<code>JavaScript
var client = new RTM(&quot;YOUR_ENDPOINT&quot;, &quot;YOUR_APPKEY&quot;, {protocol: 'cbor'});

client.on('enter-connected', function () {
  var message = {
    who: 'zebra',
    where: new Uint8Array([1,2,3,4,5])
  };
  client.publish('animals', message, function (pdu) {
    console.log('Message published:', pdu);
  });
});

client.start();</code>
</details>

<h2>Using HTTPS Proxy (NodeJS only)</h2><p>The SDK supports working through an https (not http) proxy.</p>
<p>When creating a new client specify <code>proxyAgent</code> in <code>options</code> like this:</p>
<pre class="prettyprint source lang-JavaScript"><code>var client = new RTM(endpoint, appKey, {
    proxyAgent: proxyAgent
});</code></pre><p>Use any custom http.Agent implementation like:</p>
<ul>
<li><a href="https://github.com/TooTallNate/node-https-proxy-agent#ws-websocket-connection-example">https-proxy-agent</a></li>
<li><a href="https://github.com/TooTallNate/node-socks-proxy-agent#ws-websocket-connection-example">socks-proxy-agent</a></li>
</ul>
<p>NodeJS example with using <code>https-proxy-agent</code>:</p>
<pre class="prettyprint source lang-JavaScript"><code>var HttpsProxyAgent = require('https-proxy-agent');

var client = new RTM(&quot;YOUR_ENDPOINT&quot;, &quot;YOUR_APPKEY&quot;, {
    proxyAgent: HttpsProxyAgent('http://127.0.0.1:3128')
});</code></pre><h2>Verbose logging of all incoming and outcoming PDUs</h2><p>You can enable dumping of all PDUs either from your code</p>
<pre class="prettyprint source lang-JavaScript"><code>var RTM = require(&quot;satori-rtm-sdk&quot;);
RTM.logger.DEBUG = true;

// create an RTM client instance
var rtm = new RTM(&quot;YOUR_ENDPOINT&quot;, &quot;YOUR_APPKEY&quot;);</code></pre><p>or by setting DEBUG_SATORI_SDK environment variable prior to running your application</p>
<pre class="prettyprint source lang-JavaScript"><code>$ export DEBUG_SATORI_SDK=true
$ node myapp.js</code></pre><h2>Testing</h2><p>The SDK includes an integration test suite. The tests connect to RTM, so you need to provide RTM credentials.</p>
<p>The <code>credentials.json</code> file must include the following key-value pairs:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;endpoint&quot;: &quot;YOUR_ENDPOINT&quot;,
  &quot;appkey&quot;: &quot;YOUR_APPKEY&quot;,
  &quot;auth_role_name&quot;: &quot;YOUR_ROLE&quot;,
  &quot;auth_role_secret_key&quot;: &quot;YOUR_SECRET&quot;,
  &quot;auth_restricted_channel&quot;: &quot;YOUR_RESTRICTED_CHANNEL&quot;
}</code></pre><ul>
<li><code>endpoint</code> is your customer-specific endpoint for RTM access.</li>
<li><code>appkey</code> is your application key.</li>
<li><code>auth_role_name</code> is a role name that permits to publish / subscribe to <code>auth_restricted_channel</code>. Must be not <code>default</code>.</li>
<li><code>auth_role_secret_key</code> is a secret key for <code>auth_role_name</code>.</li>
<li><code>auth_restricted_channel</code> is a channel with subscribe and publish access for <code>auth_role_name</code> role only.</li>
</ul>
<p>After setting up <code>credentials.json</code>, just type <code>npm test</code> at the command line.</p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Nov 14 2017 16:18:34 GMT+0100 (CET) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>