<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>observer.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<header class="page-header" style="height: 60px">
    <div
        class="page-header-content"
        style="align-items: center; display: flex; height: 60px; position: fixed;"
    >
        <a class="page-logo-link" href="https://www.satori.com" style="cursor: pointer;">
            <img
                alt="Satori"
                class="page-logo-image"
                height="30"
                src="https://www.satori.com/assets/images/logo-light@2x.png"
                width="177"
            />
        </a>
    </div>
</header>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Observer.html">Observer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Observer.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Observer.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Observer.html#on">on</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="RTM.html">RTM</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#.roleSecretAuthProvider">roleSecretAuthProvider</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#getSubscription">getSubscription</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#isConnected">isConnected</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#isStopped">isStopped</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#on">on</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#publish">publish</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#read1">read</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#read2">read</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#restart">restart</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#resubscribe">resubscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#start">start</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#stop">stop</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#subscribe">subscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#unsubscribe">unsubscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="RTM.html#write">write</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Subscription.html">Subscription</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Subscription.html#fire">fire</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Subscription.html#off">off</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Subscription.html#on">on</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="RTM.SubscriptionMode.html">SubscriptionMode</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li>
</nav>

<div id="main">
    
    <h1 class="page-title">observer.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var logger = require('./logger.js');

/**
 * Creates an observer instance.
 * @class
 */
function Observer() {
  this.handlers = {};
}

Observer.prototype = {
  /**
   * Attaches an event handler function for the event specified in &lt;code>name&lt;/code>.
   *
   * The event is usually related to a client or subscription state. It may also be an event
   * that occurs when the client or subscription receives information from RTM. For example, the
   * the following are [RTM]{@link RTM} client events:
   * &lt;ul>
   *     &lt;li>&lt;code>data:&lt;/code> The client received a PDU from RTM.&lt;/li>
   *     &lt;li>&lt;code>enter-connected:&lt;/code> The client is now connected to RTM.&lt;/li>
   * &lt;/ul>
   * A possible event for a [Subscription]{@link Subscription} is &lt;code>enter-subscribed&lt;/code>.
   *
   * The &lt;code>fn&lt;/code> parameter is a function that's invoked when the event occurs. The PDU for
   * the event is passed to this function.
   *
   * @param {string} name - event name
   *
   * @param {function} fn - event handler function
   *
   * @return {void}
   */
  on: function (name, fn) {
    if (!(name in this.handlers)) {
      this.handlers[name] = [];
    }
    this.handlers[name].push(fn);
  },

  /**
   * Removes an event handler.
   *
   * The event specified in &lt;code>name&lt;/code> is an [RTM]{@link RTM} or
   * [Subscription]{@link Subscription} event that has an attached event handler function
   * (see the &lt;code>on()&lt;/code> function).
   *
   * The Protocol Data Unit (PDU) for the event is passed to the
   * &lt;code>fn&lt;/code> function parameter.
   *
   * @param {string} name - event name
   *
   * @param {function} fn - event handler function
   *
   * @return {void}
   */
  off: function (name, fn) {
    if (!(name in this.handlers)) {
      return;
    }
    this.handlers[name] = this.handlers[name].filter(function (item) {
      return item !== fn;
    });
  },

  /**
   * Executes all handlers attached for the specified event type.
   *
   * The event specified in &lt;code>name&lt;/code> is an [RTM]{@link RTM} or
   * [Subscription]{@link Subscription} event that has an attached event handler function
   * (see the &lt;code>on()&lt;/code> function).
   *
   * @param {string} name - name of an event that has attached handlers
   * @param {...Object} args - event arguments.
   *
   * @return {void}
   */
  fire: function () {
    var name;
    var fns;
    var i;
    var len = arguments.length;
    // Copy arguments to solve 'Not optimized: Bad value context for arguments value'
    // See https://github.com/GoogleChrome/devtools-docs/issues/53#issuecomment-51941358
    var args = new Array(len);
    for (i = 0; i &lt; len; i += 1) {
      args[i] = arguments[i];
    }
    name = args.shift();

    fns = this.handlers[name] || [];
    fns.forEach(function (fn) {
      try {
        fn.apply(null, args);
      } catch (e) {
        logger.error(e);
      }
    });
  },
};

module.exports = Observer;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Nov 14 2017 16:18:34 GMT+0100 (CET) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
